/* public/css/supporter_fx.css */
/* 아바타 내부만 보이도록 클립 */
.avatar-wrap .avatar-clip{
  position: relative;
  overflow: hidden;
  border-radius: var(--round, 18px);
}
.avatar-wrap{ position: relative; perspective: 1000px; }

/* FX 레이어는 레이아웃 차지 X, HALO만큼 밖으로 확장 */
.supporter-fx{
  position:absolute;
  inset: calc(-1 * var(--halo, 32px));
  pointer-events:none;
}
.supporter-fx .fx-canvas{ display:block; width:100%; height:100%; }
.supporter-fx-back  { z-index:1; }
.supporter-fx-front { z-index:3; }

.avatar-wrap{ position:relative; perspective:1000px; overflow:visible; }
.avatar-wrap .avatar-clip{
  position:relative; overflow:hidden; border-radius:var(--round,18px); z-index:2;
}


.avatar-wrap .avatar-clip img{
  display:block; width:100%; height:auto; /* 자연 비율 */
}


.avatar-wrap[data-tilt="1"]{
  transition: transform .12s ease;
  will-change: transform;
}



/* 뒤/앞 레이어 */
.supporter-fx {
  position: absolute;
  inset: calc(var(--halo, 32px) * -1);
  transform-style: preserve-3d;
  pointer-events: none;
  overflow: visible;
}
.supporter-fx-back  { z-index: 1; }
/* 살짝 입체감(과하지 않게) */
.supporter-fx-back  { transform: translateZ(-0.5px); }
.supporter-fx-front { transform: translateZ( 0.5px); }

.avatar-wrap img    { position: relative; z-index: 2; display:block; }
.supporter-fx-front { z-index: 3; }
.avatar-wrap .top-actions { position:absolute; top:16px; right:16px; z-index:99; }

/* 캔버스는 HALO까지 확장 */
.supporter-fx .fx-canvas {
  position: absolute;
  top:  calc(var(--halo, 32px) * -1);
  left: calc(var(--halo, 32px) * -1);
  width:  calc(100% + calc(var(--halo, 32px) * 2));
  height: calc(100% + calc(var(--halo, 32px) * 2));
}

/* 링/베일은 사용 안 함 (숨김) */
.supporter-fx .ring, .supporter-fx .veil { display:none; }

/* 구(舊) supporter-* 의 ::before/::after 강제 비활성 (중복 방지) */
.avatar-wrap.supporter-flame::before,
.avatar-wrap.supporter-flame::after,
.avatar-wrap.supporter-galaxy::before,
.avatar-wrap.supporter-galaxy::after,
.avatar-wrap.supporter-forest::before,
.avatar-wrap.supporter-forest::after {
  content: none !important;
  animation: none !important;
  box-shadow: none !important;
}

/* 접근성: 모션 줄이기 */
@media (prefers-reduced-motion: reduce) {
  .avatar-wrap[data-tilt="1"] { transform: none !important; }
}
